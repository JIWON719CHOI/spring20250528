<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<!--: Thymeleaf í…œí”Œë¦¿ ë¬¸ë²•ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ XML ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì„ ì–¸ì…ë‹ˆë‹¤.-->
<head>
    <meta charset="UTF-8">
    <!--ë¬¸ì„œì˜ ë¬¸ì ì¸ì½”ë”©ì„ UTF-8ë¡œ ì§€ì •í•©ë‹ˆë‹¤ (í•œê¸€ ê¹¨ì§ ë°©ì§€).-->
    <title>ìƒí’ˆ ê²€ìƒ‰</title>
    <style>
        table, td, th {
            border: 1px solid #ccc;
            border-collapse: collapse;
            padding: 4px 8px;
        }

        .pagination a {
            margin: 0 4px;
            text-decoration: none;
        }

        .active {
            font-weight: bold;
            color: blue;
        }
    </style>
</head>

<body>
<h3>ìƒí’ˆëª… ì¡°íšŒ (w/ paging)</h3>

<!--ğŸ“Œ ê²€ìƒ‰ í¼-->
<!--th:action : íƒ€ì„ë¦¬í”„ ë¬¸ë²•ìœ¼ë¡œ /main15/sub4 ê²½ë¡œë¡œ GET ìš”ì²­ì„ ë³´ëƒ…ë‹ˆë‹¤. ${} ì—†ì´ ì¼ìœ¼ë¯€ë¡œ ì •ì ì¸ ê²½ë¡œì…ë‹ˆë‹¤.-->
<!--method="get" : URL íŒŒë¼ë¯¸í„°ë¥¼ ì´ìš©í•œ ê²€ìƒ‰ ë°©ì‹ì…ë‹ˆë‹¤ (ì˜ˆ: /main15/sub4?keyword=ì‚¬ê³¼)-->
<form th:action="@{/main15/sub4}" method="get">
    <label>
        ìƒí’ˆëª…
        <!--name="keyword" : í¼ ì…ë ¥ê°’ì˜ íŒŒë¼ë¯¸í„° ì´ë¦„ â†’ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ @RequestParam("keyword")ë¡œ ë°›ì„ ìˆ˜ ìˆìŒ.-->
        <!--th:value="${param.keyword}" : ì‚¬ìš©ìê°€ ì…ë ¥í•œ ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥ì°½ì— ê·¸ëŒ€ë¡œ ìœ ì§€ì‹œí‚µë‹ˆë‹¤.
                                            ${param.keyword}ëŠ” GET ìš”ì²­ìœ¼ë¡œ ë“¤ì–´ì˜¨ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.-->
        <input type="text" name="keyword" th:value="${param.keyword}">
    </label>
    <button type="submit">ê²€ìƒ‰</button>
</form>

<br>

<!--ğŸ“Œ ê²°ê³¼ í…Œì´ë¸”-->
<table>
    <thead>
    <tr>
        <th>id</th>
        <th>name</th>
        <th>supplier</th>
        <th>category</th>
        <th>unit</th>
        <th>price</th>
    </tr>
    </thead>

    <tbody>
    <!--th:each :  productList ë¼ëŠ” ë¦¬ìŠ¤íŠ¸ë¥¼ ìˆœíšŒí•˜ë©° í•˜ë‚˜ì”© product ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ êº¼ëƒ…ë‹ˆë‹¤.
                    productListëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ model.addAttribute("productList", ...)ë¡œ ì „ë‹¬ëœ ë°ì´í„°ì…ë‹ˆë‹¤.-->
    <tr th:each="product : ${productList}">

        <!--th:text : ê°ê° product ê°ì²´ì˜ í•„ë“œë¥¼ th:textë¡œ HTMLì— ì¶œë ¥í•©ë‹ˆë‹¤.
                  ì˜ˆ: product.nameì€ ProductDto í´ë˜ìŠ¤ì˜ getName() ë©”ì„œë“œì— í•´ë‹¹í•©ë‹ˆë‹¤.-->
        <td th:text="${product.id}"></td>
        <td th:text="${product.name}"></td>
        <td th:text="${product.supplier}"></td>
        <td th:text="${product.category}"></td>
        <td th:text="${product.unit}"></td>
        <td th:text="${product.price}"></td>
    </tr>
    </tbody>

</table>

<br>

<!--ğŸ“Œ í˜ì´ì§€ ë„¤ì´ì…˜(Pagination)ì€ ë§ì€ ì–‘ì˜ ì½˜í…ì¸ ë¥¼ ì—¬ëŸ¬ í˜ì´ì§€ë¡œ ë‚˜ëˆ„ì–´,
                                    ì‚¬ìš©ìê°€ ì›í•˜ëŠ” í˜ì´ì§€ë¥¼ ì‰½ê²Œ ì°¾ì•„ë³¼ ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê¸°ëŠ¥-->
<div class="pagination">
    <!--ğŸ”¹ë§¨ì• : keyword ê°’ì€ ê³„ì† ìœ ì§€ë˜ë„ë¡ param.keywordë¥¼ ë„£ì–´ì¤ë‹ˆë‹¤. -->
    <a th:href="@{/main15/sub4(page=1, keyword=${param.keyword})}">ë§¨ì•</a>
    |

    <!--ğŸ”¹ì´ì „ : ${prevPage}ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ê³„ì‚°í•˜ì—¬ ëª¨ë¸ë¡œ ë„˜ê¸´ ê°’ (ì˜ˆ: í˜„ì¬ í˜ì´ì§€ - 1) -->
    <a th:href="@{/main15/sub4(page=${prevPage}, keyword=${param.keyword})}">ì´ì „</a>
    |

    <!--ğŸ”¹í˜„ì¬ í˜ì´ì§€ ê°•ì¡° #numbers.sequence(a, b) : Thymeleaf ë‚´ì¥ í•¨ìˆ˜ë¡œ aë¶€í„° bê¹Œì§€ ì •ìˆ˜ ì‹œí€€ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ìˆ«ì ë°°ì—´ ìƒì„±!
                                                  ì˜ˆ: #numbers.sequence(1, 5) â†’ [1, 2, 3, 4, 5] í˜ì´ì§€ ë²ˆí˜¸ ë‚˜ì—´!-->
    <span th:each="num : ${#numbers.sequence(leftPage, rightPage)}">
        <a th:href="@{/main15/sub4(page=${num}, keyword=${param.keyword})}"
           th:text="${num}"
           th:classappend="${num == param.page or (param.page == null and num == 1)} ? 'active' : ''"></a>|
        <!--th:classappend : í˜„ì¬ í˜ì´ì§€ì´ë©´ "active" í´ë˜ìŠ¤ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤. ì¡°ê±´ë¶€ í´ë˜ìŠ¤ ì¶”ê°€. ì‚¼í•­ ì—°ì‚°ì ì‚¬ìš© ê°€ëŠ¥!
            ${param.page == null and num == 1} : page íŒŒë¼ë¯¸í„°ê°€ ì—†ìœ¼ë©´ 1í˜ì´ì§€ë¡œ ê°„ì£¼-->
    </span>

    <!--nextPage, lastPageëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ê³„ì‚°í•´ì„œ ë„˜ê²¨ì¤€ ê°’ì…ë‹ˆë‹¤.-->

    <!--ğŸ”¹ë‹¤ìŒ -->
    <a th:href="@{/main15/sub4(page=${nextPage}, keyword=${param.keyword})}">ë‹¤ìŒ</a>
    |

    <!--ğŸ”¹ë§¨ë’¤ -->
    <a th:href="@{/main15/sub4(page=${lastPage}, keyword=${param.keyword})}">ë§¨ë’¤</a>
</div>

</body>
</html>
